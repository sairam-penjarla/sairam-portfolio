<!-- Mobile Menu Button -->
<div class="sidebar-expand-btn md:hidden">
      <button id="mobileMenuBtn" aria-label="Open sidebar menu" class="p-2 rounded-lg">
            <!-- You can replace this img with an inline SVG hamburger icon for better control -->
            <img class="w-6 h-6" src="/static/images/lucidev-icons/panel-right-close.svg" alt="Menu icon" />
      </button>
</div>

<!-- Mobile Overlay -->
<div id="mobileOverlay" class="hidden"></div>

<!-- Sidebar -->
<aside id="sidebar" class="mobile-menu-closed">
      <!-- Close button (mobile only) -->
      <div class="sidebar-header-prompt md:hidden flex justify-end">
            <button id="closeSidebarBtn" class="close-button" aria-label="Close sidebar menu">
                  <img src="/static/images/lucidev-icons/x.svg" alt="Close menu" class="w-6 h-6" />
            </button>
      </div>

      <nav class=space-y-3 text-sm font-medium text-gray-600">
            <!-- Sidebar items here -->
            <a href="{{ url_for('prompts') }}" class="sidebar-btn {% if not request.view_args.subsection %}active-tab{% endif %}">
                  <span>All Prompts</span>
                  <span><img src="/static/images/lucidev-icons/chevron-right.svg" alt="" /></span>
            </a>
            {% for section in all_section_names %}
            <a href="{{ url_for('prompts', subsection=section) }}" class="sidebar-btn {% if request.view_args.subsection == section %}active-tab{% endif %}">
                  <span>{{ section.replace('-', ' ').replace('.md', '').replace('_', ' ').title() }}</span>
                  <span><img src="/static/images/lucidev-icons/chevron-right.svg" alt="" /></span>
            </a>
            {% endfor %}
      </nav>
</aside>

<script>
      const mobileMenuBtn = document.getElementById("mobileMenuBtn");
      const closeSidebarBtn = document.getElementById("closeSidebarBtn");
      const sidebar = document.getElementById("sidebar");
      const mobileOverlay = document.getElementById("mobileOverlay");

      function openMobileMenu() {
            sidebar.classList.remove("mobile-menu-closed");
            sidebar.classList.add("mobile-menu-open");
            mobileOverlay.classList.remove("hidden");
      }

      function closeMobileMenu() {
            sidebar.classList.remove("mobile-menu-open");
            sidebar.classList.add("mobile-menu-closed");
            mobileOverlay.classList.add("hidden");
      }

      if (mobileMenuBtn && closeSidebarBtn && sidebar && mobileOverlay) {
            mobileMenuBtn.addEventListener("click", openMobileMenu);
            closeSidebarBtn.addEventListener("click", closeMobileMenu);
            mobileOverlay.addEventListener("click", closeMobileMenu);

            // Close sidebar if resizing to desktop
            window.addEventListener("resize", () => {
                  if (window.innerWidth >= 768) {
                        closeMobileMenu();
                  }
            });
      }
</script>
