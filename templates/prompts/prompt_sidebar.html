<style>
      .main-content {
            padding-top: 64px;
            display: flex;
      }

      @media (min-width: 1024px) {
            .main-content {
                  width: 100%;
            }
      }
      /* Base Sidebar styles */
      aside#sidebar {
            background-color: #fff;
            overflow-y: auto;
            width: 241px;
            height: 100vh;
            transition: transform 0.3s ease-in-out;
            height: calc(100vh - 64px);
            /* box-shadow: 0 0 10px rgba(0, 0, 0, 0.05); */
            justify-content: center;
            /* align-items: center; */
            display: flex;
            flex-direction: column;
            font-weight: 200;
            padding: 18px;
      }

      /* Desktop: sidebar always visible, no transform */
      @media (min-width: 768px) {
            aside#sidebar {
                  top: 0;
                  left: 0;
                  transform: none !important;
                  z-index: 30;
                  justify-content: flex-start;

            }
            /* Hide mobile-specific buttons & overlay */
            #mobileMenuBtn,
            #closeSidebarBtn,
            #mobileOverlay {
                  display: none;
            }
      }

      /* Mobile: sidebar fixed, full height & width, slide in/out */
      @media (max-width: 767px) {
            aside#sidebar {
                  position: fixed;
                  top: 0;
                  left: 0;
                  width: 100vw;
                  height: 100vh;
                  z-index: 50;
                  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
                  background: #fff;
                  z-index: 61;
                  justify-content: flex-start;
                  padding: 1.5rem;
            }
            /* Sidebar hidden by default - translate off screen */
            aside#sidebar.mobile-menu-closed {
                  transform: translateX(-100%);
            }
            aside#sidebar.mobile-menu-open {
                  transform: translateX(0);
            }

            /* Mobile Menu Button fixed on top-left */
            .sidebar-expand-btn {
                  position: fixed;
                  top: 5rem;
                  left: 1rem;
                  display: block;
            }
            /* Mobile overlay full screen black transparent */
            #mobileOverlay {
                  position: fixed;
                  inset: 0;
                  background-color: rgba(0, 0, 0, 0.5);
                  z-index: 45;
                  transition: opacity 0.3s ease-in-out;
            }
            /* Hide overlay by default */
            #mobileOverlay.hidden {
                  display: none;
                  opacity: 0;
                  pointer-events: none;
            }
      }

      /* Sidebar buttons style */
      .sidebar-btn {
            text-decoration: none;
            color: #4b5563;
            transition: background-color 0.15s ease-in-out;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 14px;
      }
      .sidebar-btn:hover {
            background-color: #f3f4f6;
      }
      .sidebar-btn.active-tab {
            background-color: #e5e7eb;
            color: #1f2937;
            font-weight: 500;
      }
      .sidebar-btn span:last-child {
            opacity: 0;
            transition: opacity 0.15s ease-in-out;
      }
      .sidebar-btn.active-tab span:last-child,
      .sidebar-btn:hover span:last-child {
            opacity: 1;
      }

      /* Close button inside sidebar (mobile only) */
      aside#sidebar .close-button {
            /* padding: 0.5rem; */
            border-radius: 0.5rem;
            cursor: pointer;
      }
      /* Mobile-specific styles */
      @media (max-width: 767px) {
            /* Smaller font size (example) for sidebar buttons on mobile */
            .sidebar-btn {
                  font-size: 1.875rem; /* e.g. 14px instead of 16px */
                  padding: 15px 0px;
                  font-weight: 200;
                  font-size: 27px;
                  font-weight: 200;
                  color: var(--apple-gray-1);
            }

            /* Remove background and hover effect on active tab in mobile */
            .sidebar-btn.active-tab {
                  background-color: transparent !important;
                  font-weight: 500; /* keep font-weight if you want */
                  color: #1f2937; /* keep color or adjust if needed */
            }

            /* Disable hover background on active tab */
            .sidebar-btn.active-tab:hover {
                  background-color: transparent !important;
            }

            /* Optional: disable hover background on all sidebar buttons in mobile if you want */
            /* Or keep hover on non-active tabs */
            .sidebar-btn:hover:not(.active-tab) {
                  background-color: #f3f4f6;
            }
      }
</style>

<!-- Mobile Menu Button -->
<div class="sidebar-expand-btn md:hidden">
      <button id="mobileMenuBtn" aria-label="Open sidebar menu" class="p-2 rounded-lg">
            <!-- You can replace this img with an inline SVG hamburger icon for better control -->
            <img class="w-6 h-6" src="/static/images/lucidev-icons/panel-right-close.svg" alt="Menu icon" />
      </button>
</div>

<!-- Mobile Overlay -->
<div id="mobileOverlay" class="hidden"></div>

<!-- Sidebar -->
<aside id="sidebar" class="mobile-menu-closed">
      <!-- Close button (mobile only) -->
      <div class="sidebar-header-prompt md:hidden flex justify-end">
            <button id="closeSidebarBtn" class="close-button" aria-label="Close sidebar menu">
                  <img src="/static/images/lucidev-icons/x.svg" alt="Close menu" class="w-6 h-6" />
            </button>
      </div>

      <nav class=space-y-3 text-sm font-medium text-gray-600">
            <!-- Sidebar items here -->
            <a href="{{ url_for('prompts') }}" class="sidebar-btn {% if not request.view_args.subsection %}active-tab{% endif %}">
                  <span>All Prompts</span>
                  <span><img src="/static/images/lucidev-icons/chevron-right.svg" alt="" /></span>
            </a>
            {% for section in all_section_names %}
            <a href="{{ url_for('prompts', subsection=section) }}" class="sidebar-btn {% if request.view_args.subsection == section %}active-tab{% endif %}">
                  <span>{{ section.replace('-', ' ').replace('_', ' ').title() }}</span>
                  <span><img src="/static/images/lucidev-icons/chevron-right.svg" alt="" /></span>
            </a>
            {% endfor %}
      </nav>
</aside>

<script>
      const mobileMenuBtn = document.getElementById("mobileMenuBtn");
      const closeSidebarBtn = document.getElementById("closeSidebarBtn");
      const sidebar = document.getElementById("sidebar");
      const mobileOverlay = document.getElementById("mobileOverlay");

      function openMobileMenu() {
            sidebar.classList.remove("mobile-menu-closed");
            sidebar.classList.add("mobile-menu-open");
            mobileOverlay.classList.remove("hidden");
      }

      function closeMobileMenu() {
            sidebar.classList.remove("mobile-menu-open");
            sidebar.classList.add("mobile-menu-closed");
            mobileOverlay.classList.add("hidden");
      }

      if (mobileMenuBtn && closeSidebarBtn && sidebar && mobileOverlay) {
            mobileMenuBtn.addEventListener("click", openMobileMenu);
            closeSidebarBtn.addEventListener("click", closeMobileMenu);
            mobileOverlay.addEventListener("click", closeMobileMenu);

            // Close sidebar if resizing to desktop
            window.addEventListener("resize", () => {
                  if (window.innerWidth >= 768) {
                        closeMobileMenu();
                  }
            });
      }
</script>
